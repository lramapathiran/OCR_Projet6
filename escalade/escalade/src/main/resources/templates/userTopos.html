<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:insert="fragments/componentsRessources.html :: headVisit"> 
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Mes Topos</title>
  </head>
  
  <body>
    <!-- navbar-->
	 <header id="header2" class="fixed-top" th:insert="fragments/componentsAdmin.html :: headerVisitAdmin"></header>
	
    <div class="d-flex align-items-stretch">
	  <div id="sidebar" class="sidebar py-3" th:insert="fragments/componentsAdmin.html :: sidebar-connected"></div>
	  
      <div class="d-flex justify-content-center ">
	      <div class="page-holder w-100 d-flex flex-wrap">
	        <div class="container-fluid px-xl-5">
	          <section class="py-5" th:insert="fragments/componentsAdmin.html :: dashboard-data"></section>
	          
	          <section class="py-6 d-flex justify-content-center">
	            <div class="row mb-4 justify-content-center">
	              <div class="col-lg-12 mb-4 mb-lg-0">
	                <div class="card">
	                  <div class="card-header">
	                  	<div class="col-md-6 text-center">
					        <h6 class="text-uppercase mb-0">
					          	<span class="float-md-left">Ma Liste de Topos</span>
					        </h6>
					    </div>            
	                  </div>
	                  <div class="card-body">                           
	                    <table class="table table-striped table-hover card-text">
	                      <thead>
							<tr>
								<th>Nom</th>
								<th>Ville</th>
								<th>Date</th>	
								<th>Statut</th>
								<th>Actions</th>					
							</tr>
						</thead>
	                      <tbody>
							<tr th:each="topo : ${listUserTopos}">
								<td><a target="_blank" th:href="@{/topo/{id}(id = ${topo.id})}" th:utext = "${topo.topoName}"></a>...</td>
								<td th:utext = "${topo.localization}">...</td>
								<td th:utext = "${topo.topoDate}">...</td>
								<td th:utext = "${topo.reservation}">...</td>								
								
								<td>
									<form action="#" th:action="@{/reservation}" th:method="post">	
										<input type="hidden" name="id" th:value = "${topo.id}"/>
										<input type="hidden" name="userId" th:value = "${topo.userId}"/>
										<input type="hidden" name="siteId" th:value = "${topo.siteId}"/>
										<input type="hidden" name="topoName" th:value = "${topo.topoName}"/>
										<input type="hidden" name="localization" th:value = "${topo.localization}"/>
										<input type="hidden" name="topoDescription" th:value = "${topo.topoDescription}"/>
										<input type="hidden" name="topoDate" th:value = "${topo.topoDate}"/>
										
										<th:block class="button" th:if="${topo.reservation} == ${T(com.lavanya.escalade.enums.Reservation).A}">
											<button type="submit" class="btn btn-success" name="reservation.R" th:value="${topo.reservation.R}">Accepté</button>
											<button type="submit" class="btn btn-secondary" name="reservation.U" th:value="${topo.reservation.U}">Indisponible</button>
											<button type="submit" class="btn btn-danger" name="reservation.I" th:value="${topo.reservation.I}">Rejeté</button>
										</th:block>
										
										<th:block class="button" th:if="${topo.reservation} == ${T(com.lavanya.escalade.enums.Reservation).R}">
											<button type="submit" class="btn btn-primary" name="reservation.A" th:value="${topo.reservation.A}">Disponible</button>
											<button type="submit" class="btn btn-secondary" name="reservation.U" th:value="${topo.reservation.U}">Indisponible</button>
										</th:block>
										
										<th:block class="button" th:if="${topo.reservation} == ${T(com.lavanya.escalade.enums.Reservation).U} or ${topo.reservation} == ${T(com.lavanya.escalade.enums.Reservation).I}">
											<button type="submit" class="btn btn-primary" name="reservation.A" th:value="${topo.reservation.A}">Disponible</button>
										</th:block>
										
										
<!-- 										    <option th:each="reservationOpt : ${T(com.lavanya.escalade.enums.Reservation).values()}"  -->
<!-- 										        th:value="${reservationOpt}" -->
<!-- 										        th:text="${reservationOpt.label}" -->
<!-- 										        th:selected="${reservationOpt}==${topo.reservation}"> -->
<!-- 										    </option> -->
									</form>
								</td>
							</tr>
						</tbody>
	                    </table>
	                  </div>
	                </div>
	              </div>
	            </div>
	          </section>
	        </div>
	        
	        <footer class="footer bg-white shadow align-self-end py-3 px-xl-5 w-100" th:insert="fragments/componentsAdmin.html :: footer-connected"></footer>
	      </div>
      
      
      </div>
    </div>
    <!-- JavaScript files-->
    <th:block th:replace="fragments/componentsRessources.html :: js-scriptVisit"></th:block>
  </body>
</html>